{"ast":null,"code":"var _jsxFileName = \"/System/Volumes/Data/Bharath/React/Chat App/src/components/chat/chatList.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport firebase from \"firebase/app\";\nimport { withRouter } from \"react-router\";\nimport { UserProfileContext } from '../../store/userContext';\nimport { MessageContext } from '../../store/messageContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ChatList = props => {\n  _s();\n\n  var db = firebase.firestore();\n  const {\n    dispatch\n  } = useContext(MessageContext);\n  const {\n    name: userName\n  } = useContext(UserProfileContext);\n  const [userList, setUserList] = useState([]);\n  useEffect(() => {\n    db.collection('users').get().then(querySnapshot => {\n      const result = querySnapshot.docs.map(doc => ({ ...doc.data(),\n        id: doc.id\n      }));\n      setUserList(result);\n      console.log('users list ', result);\n    }).catch(err => console.log('Oops ', err));\n  }, [db]);\n\n  const setChatRoom = userId => {\n    dispatch({\n      type: 'SET_RECEIVER_DETAILS',\n      payload: {\n        name: userId,\n        userName: userId,\n        userID: userId\n      }\n    }); // /users/user1/conversations/user2/messages\n\n    db.collection('/users/user1/conversations/user2/messages').get().then(querySnapshot => {\n      const result = querySnapshot.docs.map(doc => ({ ...doc.data(),\n        id: doc.id\n      })); // setUserList(result);\n\n      console.log('messages list ', result);\n    }).catch(err => console.log('Oops ', err));\n  }; // console.log(userList)\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"Welcome to chatroom \", userName]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: \"pick a contact u gotta talk\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: userList.map((el, i) => /*#__PURE__*/_jsxDEV(\"p\", {\n          onClick: e => setChatRoom(el.id),\n          children: el.name\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 43\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 12\n  }, this);\n};\n\n_s(ChatList, \"NzgdvMjH/SQSc/YOqRvwWg620wA=\");\n\n_c = ChatList;\nexport default _c2 = withRouter(ChatList);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ChatList\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/System/Volumes/Data/Bharath/React/Chat App/src/components/chat/chatList.js"],"names":["React","useContext","useEffect","useState","firebase","withRouter","UserProfileContext","MessageContext","ChatList","props","db","firestore","dispatch","name","userName","userList","setUserList","collection","get","then","querySnapshot","result","docs","map","doc","data","id","console","log","catch","err","setChatRoom","userId","type","payload","userID","el","i","e"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport firebase from \"firebase/app\";\nimport { withRouter } from \"react-router\";\nimport { UserProfileContext } from '../../store/userContext';\nimport { MessageContext } from '../../store/messageContext';\n\nconst ChatList = props => {\n    var db = firebase.firestore()\n    const {dispatch} = useContext(MessageContext);\n    const { name: userName } = useContext(UserProfileContext);\n    const [userList, setUserList] = useState([]);\n\n    useEffect(() => {\n        db.collection('users').get().then((querySnapshot) => {\n            const result = querySnapshot.docs.map(doc => ({ ...doc.data(), id: doc.id }));\n            setUserList(result);\n            console.log('users list ', result)\n        }).catch(err => console.log('Oops ', err))\n    }, [db])\n\n\n    const setChatRoom = (userId) => {\n        dispatch({\n            type: 'SET_RECEIVER_DETAILS',\n            payload: {\n                name: userId,\n                userName: userId,\n                userID: userId\n            }\n        })\n        // /users/user1/conversations/user2/messages\n\n        db.collection('/users/user1/conversations/user2/messages').get().then((querySnapshot) => {\n            const result = querySnapshot.docs.map(doc => ({ ...doc.data(), id: doc.id }));\n            // setUserList(result);\n            console.log('messages list ', result)\n        }).catch(err => console.log('Oops ', err))\n    }\n\n    // console.log(userList)\n\n    return <div>\n        <h1>Welcome to chatroom {userName}</h1>\n        <div>\n            <h3><ul>pick a contact u gotta talk</ul></h3>\n            <div>{userList.map((el, i) => <p key={i} onClick={e => setChatRoom(el.id)}>{el.name}</p>)}</div>\n        </div>\n    </div>\n}\n\nexport default withRouter(ChatList);"]},"metadata":{},"sourceType":"module"}